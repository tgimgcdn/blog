---
title: 博客文章
description: 博客文章列表 - 第 {frontmatter.page} 页
template: splash
setup: |
  import HomePage from '../../../components/HomePage.astro'
---

import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const allPosts = await getCollection('docs', entry => entry.id.startsWith('blog/'));
  const totalPages = Math.ceil(allPosts.length / 9);
  
  // 只生成第2页及以后的页面，因为第1页已经由首页处理
  return Array.from({ length: totalPages - 1 }).map((_, i) => {
    const pageNum = i + 2; // 从第2页开始
    return {
      params: { page: String(pageNum) },
      props: { pageNum }
    };
  });
}

<HomePage pageNum={frontmatter.page || Astro.props.pageNum} /> 
