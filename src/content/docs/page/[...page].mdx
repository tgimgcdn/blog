---
title: 博客文章列表
description: 所有博客文章的分页浏览
template: splash
---

import { getCollection } from 'astro:content';
import HomePage from '../../../components/HomePage.astro';

export async function getStaticPaths() {
  // 获取所有博客文章
  const allPosts = await getCollection('docs', entry => entry.id.startsWith('blog/'));
  const postsPerPage = 9; // 每页9篇文章
  const totalPages = Math.ceil(allPosts.length / postsPerPage);
  
  console.log(`[...page].mdx 中的路由生成: 总文章数 = ${allPosts.length}, 总页数 = ${totalPages}`);
  
  // 生成所有分页路径
  const paths = [];
  
  // 为每个页码生成路径（第2页到最后一页）
  for (let pageNum = 2; pageNum <= totalPages; pageNum++) {
    paths.push({
      // 确保路径格式正确，仅使用数字作为参数
      params: { page: String(pageNum) },
      props: { pageNum }
    });
  }
  
  // 仅处理有效的数字页码，避免处理其他路径
  console.log(`[...page].mdx 生成的路径数量: ${paths.length}`);
  console.log(`路径示例: ${paths.length > 0 ? JSON.stringify(paths[0]) : '无路径'}`);
  
  return paths;
}

// 确保始终有 pageNum 值，默认为 1（首页）
const { pageNum = 1 } = Astro.props;
console.log(`[...page].mdx 渲染: 使用页码 = ${pageNum}, 类型 = ${typeof pageNum}`);

<HomePage pageNum={pageNum} /> 
