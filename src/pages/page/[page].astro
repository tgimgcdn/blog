---
import { getCollection } from 'astro:content';
import HomePage from '../../components/HomePage.astro';

// 从URL路径获取当前页码
export async function getStaticPaths() {
  // 获取所有博客文章
  const allPosts = await getCollection('docs', entry => entry.id.startsWith('blog/'));
  const postsPerPage = 9; // 每页显示9篇文章
  const totalPages = Math.ceil(allPosts.length / postsPerPage);
  
  // 生成除第一页外的所有页码路径
  return Array.from({ length: totalPages - 1 }, (_, i) => {
    const pageNum = i + 2; // 页码从2开始
    return {
      params: { page: String(pageNum) },
      props: { pageNum }
    };
  });
}

const { page } = Astro.params;
const { pageNum } = Astro.props;
---

<HomePage pageNum={pageNum} /> 
