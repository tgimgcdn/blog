---
// 外链跳转组件
import { Image } from '@astrojs/image/components';
---

<div class="redirect-container">
  <div class="redirect-content">
    <div class="icon-container">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
        <polyline points="15 3 21 3 21 9"></polyline>
        <line x1="10" y1="14" x2="21" y2="3"></line>
      </svg>
    </div>
    <h1>即将离开本站</h1>
    <p>您即将访问外部链接，请注意安全。</p>
    <div class="button-group">
      <button id="confirmBtn" class="confirm-button">
        继续访问
      </button>
      <button id="cancelBtn" class="cancel-button">
        取消
      </button>
    </div>
  </div>
</div>

<style>
  .redirect-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 1rem;
    background: var(--sl-color-black);
  }

  .redirect-content {
    background: var(--sl-color-white);
    padding: 2rem;
    border-radius: 8px;
    text-align: center;
    max-width: 400px;
    width: 100%;
  }

  .icon-container {
    margin-bottom: 1.5rem;
    color: var(--sl-color-blue);
  }

  h1 {
    margin: 0 0 1rem;
    font-size: 1.5rem;
    color: var(--sl-color-black);
  }

  p {
    margin: 0 0 2rem;
    color: var(--sl-color-gray-3);
  }

  .button-group {
    display: flex;
    gap: 1rem;
    justify-content: center;
  }

  .confirm-button,
  .cancel-button {
    flex: 1;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .confirm-button {
    background: var(--sl-color-blue);
    color: white;
  }

  .confirm-button:hover {
    background: var(--sl-color-blue-hover);
  }

  .cancel-button {
    background: var(--sl-color-gray-5);
    color: var(--sl-color-black);
  }

  .cancel-button:hover {
    background: var(--sl-color-gray-4);
  }
</style>

<script>
  // 获取URL参数
  const urlParams = new URLSearchParams(window.location.search);
  const encodedUrl = urlParams.get('url');
  
  if (!encodedUrl) {
    window.location.href = '/';
  }

  // 解码base64 URL
  const targetUrl = atob(encodedUrl);

  // 确认按钮点击事件
  document.getElementById('confirmBtn')?.addEventListener('click', () => {
    window.location.href = targetUrl;
  });

  // 取消按钮点击事件
  document.getElementById('cancelBtn')?.addEventListener('click', () => {
    window.history.back();
  });
</script> 
