---
// ExternalLink.astro - 用于处理外部链接，重定向到中转页面
export interface Props {
  href: string;
  class?: string;
  title?: string;
}

const { href, class: className, title, ...rest } = Astro.props;

// 使用encodeURIComponent直接编码URL，不需要Base64
const encodedUrl = encodeURIComponent(href);
// 构建中转页面URL
const redirectUrl = `/link?url=${encodedUrl}`;
---

<a href={redirectUrl} class={className} title={title || `链接将跳转至: ${href}`} {...rest}>
  <slot />
</a> 
