---
import { Icon } from '@astrojs/starlight/components';
---

<footer class="sl-footer">
  <div class="sl-footer-content">
    <p class="copyright">©2023 - 2025 By 参界随笔</p>
    <div class="sl-footer-links">
      <a href="https://astro.build" class="sl-footer-link">
        <Icon name="astro" />
        <span>Astro</span>
      </a>
      <a href="https://github.com/withastro/starlight" class="sl-footer-link">
        <Icon name="github" />
        <span>GitHub</span>
      </a>
    </div>
  </div>
</footer>

<!-- 返回顶部按钮 - 使用纯HTML元素和内联样式确保最大兼容性 -->
<a 
  href="#top" 
  id="back-to-top-btn" 
  title="返回顶部" 
  style="
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: #3584e4;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 99999;
    cursor: pointer;
    pointer-events: auto;
  "
>
  <svg 
    xmlns="http://www.w3.org/2000/svg" 
    width="24" 
    height="24" 
    viewBox="0 0 24 24" 
    fill="none" 
    stroke="currentColor" 
    stroke-width="2" 
    stroke-linecap="round" 
    stroke-linejoin="round"
    style="cursor: pointer;"
  >
    <polyline points="18 15 12 9 6 15" style="cursor: pointer;"></polyline>
  </svg>
</a>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    // 避免重复初始化
    if (window._backToTopInitialized) return;
    window._backToTopInitialized = true;
    
    const btn = document.getElementById('back-to-top-btn');
    if (!btn) return;
    
    // 监听滚动事件
    window.addEventListener('scroll', function() {
      if (window.pageYOffset > 300) {
        btn.style.opacity = '1';
        btn.style.visibility = 'visible';
      } else {
        btn.style.opacity = '0';
        btn.style.visibility = 'hidden';
      }
    });
    
    // 处理点击事件
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    
    // 鼠标悬停时的特效
    btn.addEventListener('mouseover', function() {
      btn.style.backgroundColor = '#1a6bbd';
      btn.style.transform = 'translateY(-3px)';
      btn.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.3)';
    });
    
    btn.addEventListener('mouseout', function() {
      btn.style.backgroundColor = '#3584e4';
      btn.style.transform = '';
      btn.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.2)';
    });
    
    // 初始状态
    if (window.pageYOffset > 300) {
      btn.style.opacity = '1';
      btn.style.visibility = 'visible';
    }
  });
  
  // 备份：确保在窗口加载完成后依然初始化
  window.addEventListener('load', function() {
    if (!window._backToTopInitialized) {
      const event = new Event('DOMContentLoaded');
      document.dispatchEvent(event);
    }
  });
</script>

<style>
  .sl-footer {
    padding: var(--sl-content-padding);
    border-top: 1px solid var(--sl-color-gray-5);
    margin-top: 4rem;
  }

  .sl-footer-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem;
    max-width: var(--sl-content-width);
    margin: 0 auto;
    text-align: center;
  }

  .copyright {
    margin: 0;
  }

  .sl-footer-links {
    display: flex;
    gap: 1.5rem;
  }

  .sl-footer-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--sl-color-text);
    text-decoration: none;
  }

  .sl-footer-link:hover {
    color: var(--sl-color-accent);
  }
  
  /* 确保移动设备适配 */
  @media (max-width: 768px) {
    #back-to-top-btn {
      bottom: 20px !important;
      right: 20px !important;
      width: 40px !important;
      height: 40px !important;
    }
    
    #back-to-top-btn svg {
      width: 20px !important;
      height: 20px !important;
    }
  }
</style> 
