---
// 从 props 获取分类
const { category } = Astro.props;

// 从 starlightBlog 获取文章数据
const starlightBlog = Astro.locals?.starlightBlog;

// 获取所有文章并按日期排序
const posts = starlightBlog?.posts
  ?.filter(post => post.entry?.data?.category === category)
  .sort((a, b) => {
    const dateA = new Date(a.entry?.data?.pubDate || 0);
    const dateB = new Date(b.entry?.data?.pubDate || 0);
    return dateB.getTime() - dateA.getTime();
  }) || [];
---

<div class="category-posts">
  <h2>{category === 'tech' ? '技术文章' : category === 'life' ? '生活随笔' : '未分类文章'}</h2>
  <ul class="posts-list">
    {posts.map(post => (
      <li>
        <a href={post.href} class="post-link">
          {post.entry?.data?.title}
        </a>
      </li>
    ))}
  </ul>
</div>

<style>
  .category-posts {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  h2 {
    font-size: 2rem;
    margin-bottom: 2rem;
    color: var(--sl-color-accent-high);
  }

  .posts-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .post-link {
    display: block;
    padding: 1rem;
    margin-bottom: 0.5rem;
    color: var(--sl-color-text-1);
    text-decoration: none;
    border-radius: 0.5rem;
    transition: all 0.2s ease;
  }

  .post-link:hover {
    background-color: var(--sl-color-accent-low);
    color: var(--sl-color-accent-high);
  }
</style> 
